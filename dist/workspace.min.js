!function(t){"use strict";function e(t,e){var i=document.createElement("div").style;return i["Moz"+t]!==e||i["Webkit"+t]!==e||i["ms"+t]!==e||i[t.replace(/^./,function(t){return t.toUpperCase()})]!==e}function i(){return document.documentElement.offsetWidth<a}var n=(window.console||{log:function(){}},"ontouchstart"in window),a=650,r=e("FlexWrap"),s=e("BoxDirection"),o=(e("Transform"),e("Perspective"));i(),document.documentElement.className=[document.documentElement.className||"",(r?"":"no-")+"flex",(s?"":"no-")+"legacyflex",(n?"":"no-")+"touch"].join(" "),t.fn.transform=function(e,i){var n=e+"("+i+")";o&&"translateX"===e&&(n="translate3d(0,0,0) translate("+(i||"0")+",0)");var a={transform:n,msTransform:n,MozTransform:n,WebkitTransform:n};return t(this).css(a)},t.fn.frameset=function(){var e=t(this),a=e.addClass("frameset").find("> *").addClass("frame");return 0===a.filter(".active").length&&a.each(function(e){(0===e||t(this).hasClass("frame-main"))&&t(this).addClass("active").siblings().removeClass("active")}),a.filter(function(){return!(r&&t(this).hasClass("flex"))}).each(function(e){t('<button class="resize"></button>').appendTo(this).touch(function(e,i){if(!i)return!1;var n=e.screenX-i.screenX;if(0!==n){var a,s=t(this).parent(),o=s;"0px"===t(this).css("left")&&(o=s=o.prev());do if(a=o.outerWidth(!0)+n,!(a>parseInt(o.css("maxWidth"),10)||a<parseInt(o.css("minWidth"),10))){h=!0;break}while((o=o.prev(".frame"))&&o.length>0);if(0!==o.length){for(var f,c=s,h=!1;c.next(".frame").length>0;)if(c=c.next(".frame"),f=c.outerWidth(!0)-n,!(f>parseInt(c.css("maxWidth"),10)||f<parseInt(c.css("minWidth"),10))){h=!0;break}h&&(o.filter(function(){return!(r&&t(this).hasClass("flex"))}).width(a+"px"),c.filter(function(){return!(r&&t(this).hasClass("flex"))}).width(f+"px"))}}})}).find(".workspace-back").bind("click",function(){t(this).parents(".frame").prev(".frame").addClass("active").siblings().removeClass("active")}),e.bind("fillframe",function(){if(!i()){var e=t(this).width();t(".frame:not(.pinned)",this).each(function(){var i=t(this).outerWidth(!0);e-=i,t(this).filter(function(){return!(r&&t(this).hasClass("flex"))}).width(i+"px")}).each(function(){if(0!==e){var i=parseInt(t(this).css("minWidth"),10)||0,n=parseInt(t(this).css("maxWidth"),10)||0,a=t(this).outerWidth(!0);i>a+e?(e+=a-i,a=i):a+e>n&&n>0?(e-=a-n,a=n):(a+=e,e=0),t(this).filter(function(){return!(r&&t(this).hasClass("flex"))}).width(a+"px")}})}}),n||(t(window).bind("resize",function(){e.trigger("fillframe")}),e.trigger("fillframe")),e},t.fn.showFrame=function(e){return t(this).each(function(){var n=t(".frame-nav a").get(t(this).index(0));if(t(this).add(n).addClass("active").siblings().removeClass("active"),i()){var a=t(this).index(),r=t(this).parent(),s="-"+a/r.find(".frame").length*100+"%";r.transform("translateX",s)}else t(this).add(n)[e?"toggleClass":"removeClass"]("pinned");t(this).parent().trigger("fillframe")})},t.fn.buildNavigation=function(){t(this).each(function(){var e=t(this);0===e.find(".toggle-frame-nav").length&&e.html('<button class="toggle-frame-nav">close</button>'),t(".frameset .frame").each(function(){var i=this,n=t("<a/>").text(t(this).attr("data-framename")||this.title).appendTo(e).attr("data-frmindex",t(i).index()).click(function(){t(i).showFrame(!0)});t(this).on("pinned",function(){n[t(this).hasClass("pinned")?"addClass":"removeClass"]("pinned")})}),t("body").on("click",function(e){t("html").hasClass("show-frame-nav")&&!t(e.target).parents(".frame-nav").length&&t("html").toggleClass("show-frame-nav")}),e.appendTo("body"),t(".toggle-frame-nav").click(function(e){t(document.documentElement).toggleClass("show-frame-nav"),e.preventDefault(),e.stopPropagation()}),t(window).bind("resize",function(){e.height(window.innerHeight+"px"),t(document.body).height(window.innerHeight+"px")}).trigger("resize")})};var f=[];t.fn.dataSrc=function(){return t(this).each(function(){var e=t(this).height(),i=t(this).offset().top;t("img:not([src])",this).filter(function(){var n=t(this).offset().top,a=t(this).height();return n+a>=i&&i+e>=n}).each(function(){this.src=t(this).attr("data-src"),t(this).is("[data-src-error]")&&(this.onerror=function(){this.src=t(this).attr("data-src-error")}),t(this).removeAttr("data-src"),t.inArray(this.src,f)>-1?t(this).animate({opacity:1},"fast"):t(this).load(function(){t(this).animate({opacity:1},"fast"),f.push(this.src)})})})},t(function(){t(".frameset").frameset().find(".active").showFrame(),t(".data-src").scroll(function(){t(this).dataSrc()}),t(".frame-nav").buildNavigation(),t(window).bind("resize",function(){var e=t(".frameset"),n=e.find(".frame");if(!i())return void e.transform("translateX","").add(n).css({width:""});var a=e.parent().innerWidth(),r=n.length*a;e.css({width:r+"px"}),n.css({width:a+"px"}),n.filter(".active").showFrame()}).trigger("resize"),t(".frameset").parent().swipe(function(e){if(i()){var n=t(this).find(".frameset"),a=n.find(".frame"),r=a.filter(".active"),s=n.parent().innerWidth(),o=a.length,f=r.index(),c=r;switch(e.type){case"dragleft":case"dragright":e.preventDefault(),e.stopPropagation();var h=-(100/o*f),d=100/s*e.gesture.deltaX/o;return(0===f&&"right"===e.gesture.direction||f===o-1&&"left"===e.gesture.direction)&&(d*=.3),void n.transform("translateX",h+d+"%").css({WebkitTransition:"-webkit-transform 0s",mozTransition:"-moz-transform 0s",transition:"transform 0s"});case"swipeleft":c=r.next();break;case"swiperight":c=r.prev();break;case"release":Math.abs(e.gesture.deltaX)>s/2&&(c="right"===e.gesture.direction?r.prev():r.next())}return n.css({WebkitTransition:"",mozTransition:"",transition:""}),0===c.length&&(c=r),c.showFrame(),!0}}),t(document.body).on("keydown",function(e){switch(e.which){case 37:t(".frameset .frame.active").prev().showFrame();break;case 39:t(".frameset .frame.active").next().showFrame()}})})}(jQuery);
!function(e){function t(e,t){if(e.gesture={},e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0?e.gesture.touches=e.originalEvent.touches:e.gesture.touches=[e],e.gesture.screenX=e.gesture.touches[0].screenX,e.gesture.screenY=e.gesture.touches[0].screenY,t){e.gesture.deltaTime=e.timeStamp-t.timeStamp;var n=e.gesture.deltaX=e.gesture.screenX-t.gesture.screenX,i=e.gesture.deltaY=e.gesture.screenY-t.gesture.screenY;Math.abs(i)>Math.abs(n)?e.gesture.direction=i>0?"up":"down":e.gesture.direction=n>0?"right":"left",e.gesture.distance=Math.sqrt(n*n+i*i),e.gesture.velocity=e.gesture.distance/e.gesture.deltaTime}}e.fn.touch=function(n,i,o){return e(this).each(function(){var r={},u={},c={};e(document).bind("mousemove MSPointerMove touchmove",function(e){if(e.type.match(/touch/i),!e.type.match(/mouse/i)||1===e.which){var n=e.originalEvent.pointerId||0,i=r[n],o=u[n];t(e,o),i&&"function"==typeof i&&i.call(this,e,o),u[n]=e}}),e(document).bind("mouseup MSPointerUp touchend touchcancel",function(e){var t=e.originalEvent.pointerId||0;r[t]=null,("touchend"===e.type||"touchcancel"===e.type)&&(e=u[t]);var n=c[t];n&&n.call(this,e),c[t]=null}),e(this).bind("touchend",function(e){console.log("el:touchend"),console.log(e)}).bind("selectstart",function(e){return!1}).bind("mousedown MSPointerDown touchstart",function(e){if(!("mousemove"===e.type&&"msPointerEnabled"in window.navigator)){var s=e.originalEvent.pointerId=e.originalEvent.pointerId||0;if(e.originalEvent.touches&&e.originalEvent.touches.length){var a=e.timeStamp;e=e.originalEvent.touches[0],e.timeStamp=a}var l=this;t(e),u[s]=e,r[s]=function(t,i){n.call(l,t,i,e)},c[s]=function(t){o&&o.call(l,t,e)},i&&i.call(this,e)}})})},e.fn.swipe=function(n){return e(this).touch(function(e,i,o){t(e,o),e.type="drag"+e.gesture.direction,n.call(this,e)},function(e){},function(e,i){t(e,i),e.gesture.deltaTime<200&&e.gesture.distance>20&&e.gesture.velocity>.3?e.type="swipe"+e.gesture.direction:e.type="release",n.call(this,e)})}}(jQuery);