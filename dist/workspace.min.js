(function(t){"use strict";function e(t,e){var i=document.createElement("div").style;return i["Moz"+t]!==e||i["Webkit"+t]!==e||i["ms"+t]!==e||i[t.replace(/^./,function(t){return t.toUpperCase()})]!==e}function i(){var e=n>window.outerWidth;return t("html")[e?"addClass":"removeClass"]("mobile")[e?"removeClass":"addClass"]("no-mobile"),e}var a=(window.console||{log:function(){}},"ontouchstart"in window),n=600,r=e("FlexWrap"),s=e("BoxDirection");e("Transform");var o=e("Perspective");i(),document.documentElement.className=[document.documentElement.className||"",(r?"":"no-")+"flex",(s?"":"no-")+"legacyflex",(a?"":"no-")+"touch"].join(" "),t.fn.transform=function(e,i){var a=e+"("+i+")";o&&"translateX"===e&&(a="translate3d(0,0,0) translate("+(i||"0")+",0)");var n={transform:a,msTransform:a,MozTransform:a,WebkitTransform:a};return t(this).css(n)},t.fn.frameset=function(){var e=t(this),n=e.addClass("frameset").find("> *").addClass("frame");return 0===n.filter(".active").length&&n.each(function(e){(0===e||t(this).hasClass("frame-main"))&&t(this).addClass("active").siblings().removeClass("active")}),a?e:(n.filter(function(){return!(r&&t(this).hasClass("flex"))}).each(function(){t('<button class="resize"></button>').appendTo(this).touch(function(e,i){if(!i)return!1;var a=e.screenX-i.screenX;if(0!==a){var n,s=t(this).parent(),o=s;"0px"===t(this).css("left")&&(o=s=o.prev());do if(n=o.outerWidth(!0)+a,!(n>parseInt(o.css("maxWidth"),10)||parseInt(o.css("minWidth"),10)>n)){c=!0;break}while((o=o.prev(".frame"))&&o.length>0);if(0!==o.length){for(var f,h=s,c=!1;h.next(".frame").length>0;)if(h=h.next(".frame"),f=h.outerWidth(!0)-a,!(f>parseInt(h.css("maxWidth"),10)||parseInt(h.css("minWidth"),10)>f)){c=!0;break}c&&(o.filter(function(){return!(r&&t(this).hasClass("flex"))}).width(n+"px"),h.filter(function(){return!(r&&t(this).hasClass("flex"))}).width(f+"px"))}}})}).find(".workspace-back").bind("click",function(){t(this).parents(".frame").prev(".frame").addClass("active").siblings().removeClass("active")}),e.bind("fillframe",function(){if(!i()){t("html.mobile").removeClass("mobile");var e=t(this).width();t(".frame:not(.pinned)",this).each(function(){var i=t(this).outerWidth(!0);e-=i,t(this).filter(function(){return!(r&&t(this).hasClass("flex"))}).width(i+"px")}).each(function(){if(0!==e){var i=parseInt(t(this).css("minWidth"),10)||0,a=parseInt(t(this).css("maxWidth"),10)||0,n=t(this).outerWidth(!0);i>n+e?(e+=n-i,n=i):n+e>a&&a>0?(e-=n-a,n=a):(n+=e,e=0),t(this).filter(function(){return!(r&&t(this).hasClass("flex"))}).width(n+"px")}})}}),a||(t(window).bind("resize",function(){e.trigger("fillframe")}),e.trigger("fillframe")),e)},t.fn.showFrame=function(e){return t(this).each(function(){var a=t(".frame-nav a").get(t(this).index(0));if(t(this).add(a).addClass("active").siblings().removeClass("active"),i()){var n=t(this).index(),r=t(this).parent(),s="-"+100*(n/r.find(".frame").length)+"%";r.transform("translateX",s)}else t(this).add(a)[e?"toggleClass":"removeClass"]("pinned");t(this).parent().trigger("fillframe")})},t.fn.buildNavigation=function(){t(this).each(function(){var e=t(this);0===e.find(".toggle-frame-nav").length&&e.html('<button class="toggle-frame-nav">close</button>'),t(".frameset .frame").each(function(){var i=this,a=t("<a/>").text(t(this).attr("data-framename")||this.title).appendTo(e).attr("data-frmindex",t(i).index()).click(function(){t(i).showFrame(!0)});t(this).on("pinned",function(){a[t(this).hasClass("pinned")?"addClass":"removeClass"]("pinned")})}),t("body").on("click",function(e){t("html").hasClass("show-frame-nav")&&!t(e.target).parents(".frame-nav").length&&t("html").toggleClass("show-frame-nav")}),e.appendTo("body"),t(".toggle-frame-nav").click(function(e){t(document.documentElement).toggleClass("show-frame-nav"),e.preventDefault(),e.stopPropagation()}),t(window).bind("resize",function(){e.height(window.innerHeight+"px"),t(document.body).height(window.innerHeight+"px")}).trigger("resize")})};var f=[];t.fn.dataSrc=function(){return t(this).each(function(){var e=t(this).height(),i=t(this).offset().top;t("img:not([src])",this).filter(function(){var a=t(this).offset().top,n=t(this).height();return a+n>=i&&i+e>=a}).each(function(){this.src=t(this).attr("data-src"),t(this).is("[data-src-error]")&&(this.onerror=function(){this.src=t(this).attr("data-src-error")}),t(this).removeAttr("data-src"),t.inArray(this.src,f)>-1?t(this).animate({opacity:1},"fast"):t(this).load(function(){t(this).animate({opacity:1},"fast"),f.push(this.src)})})})},t(function(){t(".frameset").frameset().find(".active").showFrame(),t(".data-src").scroll(function(){t(this).dataSrc()}),t(".frame-nav").buildNavigation(),t(window).bind("resize",function(){var e=t(".frameset"),a=e.find(".frame");if(!i())return e.transform("translateX","").add(a).css({width:""}),void 0;var n=e.parent().innerWidth(),r=a.length*n;e.css({width:r+"px"}),a.css({width:n+"px"}),a.filter(".active").showFrame()}).trigger("resize"),t(".frameset").parent().swipe(function(e){if(i()){var a=t(this).find(".frameset"),n=a.find(".frame"),r=n.filter(".active"),s=a.parent().innerWidth(),o=n.length,f=r.index(),h=r;switch(e.type){case"dragleft":case"dragright":e.preventDefault();var c=-(100/o*f),l=100/s*e.gesture.deltaX/o;return(0===f&&"right"===e.gesture.direction||f===o-1&&"left"===e.gesture.direction)&&(l*=.3),a.css({WebkitTransition:"-webkit-transform 0",mozTransition:"-moz-transform 0",transition:"transform 0"}).transform("translateX",c+l+"%"),void 0;case"swipeleft":h=r.next();break;case"swiperight":h=r.prev();break;case"release":Math.abs(e.gesture.deltaX)>s/2&&(h="right"===e.gesture.direction?r.prev():r.next())}return a.css({WebkitTransition:"",mozTransition:"",transition:""}),0===h.length&&(h=r),h.showFrame(),!0}}),t(document.body).on("keydown",function(e){switch(e.which){case 37:t(".frameset .frame.active").prev().showFrame();break;case 39:t(".frameset .frame.active").next().showFrame()}})})})(jQuery);
(function(t){function e(t,e){if(t.gesture={},t.gesture.touches=t.originalEvent.touches&&t.originalEvent.touches.length>0?t.originalEvent.touches:[t],t.gesture.screenX=t.gesture.touches[0].screenX,t.gesture.screenY=t.gesture.touches[0].screenY,e){t.gesture.deltaTime=t.timeStamp-e.timeStamp;var n=t.gesture.deltaX=t.gesture.screenX-e.gesture.screenX,i=t.gesture.deltaY=t.gesture.screenY-e.gesture.screenY;t.gesture.direction=Math.abs(i)>Math.abs(n)?i>0?"up":"down":n>0?"right":"left",t.gesture.distance=Math.sqrt(n*n+i*i)}}t.fn.touch=function(n,i,r){return t(this).each(function(){var s={},a={},o={};t(document).bind("mousemove MSPointerMove touchmove",function(t){if(t.type.match(/touch/i),!t.type.match(/mouse/i)||1===t.which){var n=t.originalEvent.pointerId||0,i=s[n],r=a[n];e(t,r),i&&"function"==typeof i&&i.call(this,t,r),a[n]=t}}),t(document).bind("mouseup MSPointerUp touchend touchcancel",function(t){var e=t.originalEvent.pointerId||0;s[e]=null,("touchend"===t.type||"touchcancel"===t.type)&&(t=a[e]);var n=o[e];n&&n.call(this,t),o[e]=null}),t(this).bind("touchend",function(t){console.log("el:touchend"),console.log(t)}).bind("selectstart",function(){return!1}).bind("mousedown MSPointerDown touchstart",function(t){if(!("mousemove"===t.type&&"msPointerEnabled"in window.navigator)){var c=t.originalEvent.pointerId=t.originalEvent.pointerId||0;if(t.originalEvent.touches&&t.originalEvent.touches.length){var h=t.timeStamp;t=t.originalEvent.touches[0],t.timeStamp=h}var f=this;e(t),a[c]=t,s[c]=function(e,i){n.call(f,e,i,t)},o[c]=function(e){r&&r.call(f,e,t)},i&&i.call(this,t)}})})},t.fn.swipe=function(n){return t(this).touch(function(t,i,r){e(t,r),t.type="drag"+t.gesture.direction,n.call(this,t)},function(){},function(t,i){e(t,i),t.type=200>t.gesture.time&&t.gesture.distance>50?"swipe"+t.gesture.direction:"release",n.call(this,t)})}})(jQuery);